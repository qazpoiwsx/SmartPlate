<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SmartPlate AI</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body{background:#0f172a;color:white;}

/* HERO */
.hero{
height:100vh;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
text-align:center;
background:linear-gradient(135deg,#0f172a,#111827);
padding:20px;
}
.hero h1{
font-size:48px;
font-weight:800;
margin-bottom:15px;
background:linear-gradient(90deg,#10b981,#3b82f6);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}
.hero p{
color:#94a3b8;
max-width:500px;
margin-bottom:30px;
}
.btn{
background:linear-gradient(135deg,#10b981,#059669);
padding:15px 30px;
border:none;
border-radius:14px;
color:white;
font-size:16px;
cursor:pointer;
transition:0.3s;
}
.btn:hover{transform:scale(1.05);}

/* INFO */
.section{
padding:80px 20px;
text-align:center;
background:#111827;
}
.section h2{margin-bottom:20px;font-size:32px;}
.cards{
display:flex;
flex-wrap:wrap;
justify-content:center;
gap:20px;
margin-top:30px;
}
.card{
background:#1e293b;
padding:25px;
border-radius:18px;
width:250px;
}

/* APP */
.app{
padding:60px 20px;
background:#0f172a;
display:flex;
justify-content:center;
}
.container{
width:480px;
background:#1e293b;
padding:30px;
border-radius:24px;
box-shadow:0 30px 60px rgba(0,0,0,0.5);
}
select,button{
width:100%;
padding:12px;
margin-bottom:12px;
border-radius:12px;
border:none;
}
select{background:#0f172a;color:white;border:1px solid #334155;}
.stat{display:flex;justify-content:space-between;margin:6px 0;}
.kcal{margin-top:10px;font-weight:700;color:#10b981;}
.history{margin-top:15px;font-size:13px;color:#cbd5e1;}
canvas{margin-top:15px;}
</style>
</head>
<body>

<!-- HERO -->
<section class="hero">
<h1>SmartPlate AI</h1>
<p>Интеллектуальный генератор персонализированных рецептов с точным расчетом БЖУ</p>
<button class="btn" onclick="scrollToApp()">Попробовать SmartPlate</button>
</section>

<!-- HOW IT WORKS -->
<section class="section">
<h2>Как это работает?</h2>
<div class="cards">
<div class="card">1️⃣ Выбираете цель питания</div>
<div class="card">2️⃣ AI подбирает уникальные ингредиенты</div>
<div class="card">3️⃣ Система рассчитывает БЖУ и калории</div>
</div>
</section>

<!-- APP -->
<section class="app" id="app">
<div class="container">
<h2 style="text-align:center;margin-bottom:15px;">Генератор рецептов</h2>

<select id="goal">
<option value="cut">Похудение</option>
<option value="maintain">Поддержание</option>
<option value="bulk">Набор массы</option>
</select>

<button class="btn" onclick="generateRecipe()">Сгенерировать</button>

<div id="result"></div>
<canvas id="chart"></canvas>
<div class="history" id="history"></div>

</div>
</section>

<script>
function scrollToApp(){
document.getElementById("app").scrollIntoView({behavior:"smooth"});
}

let usedIngredients=[];
let chart;

const ingredients={
protein:[{name:"Куриная грудка",p:23,f:2,c:0},{name:"Индейка",p:21,f:3,c:0},{name:"Лосось",p:20,f:13,c:0},{name:"Тофу",p:8,f:5,c:2},{name:"Говядина",p:26,f:15,c:0}],
carbs:[{name:"Рис",p:7,f:1,c:78},{name:"Булгур",p:12,f:1,c:76},{name:"Киноа",p:14,f:6,c:64},{name:"Батат",p:2,f:0,c:20},{name:"Кускус",p:13,f:1,c:72}],
veggies:[{name:"Брокколи",p:3,f:0,c:7},{name:"Шпинат",p:2,f:0,c:3},{name:"Цукини",p:1,f:0,c:3},{name:"Баклажан",p:1,f:0,c:6},{name:"Спаржа",p:2,f:0,c:4}],
fats:[{name:"Оливковое масло",p:0,f:100,c:0},{name:"Кокосовое масло",p:0,f:100,c:0},{name:"Льняное масло",p:0,f:100,c:0},{name:"Миндальное масло",p:0,f:100,c:0},{name:"Авокадо",p:2,f:15,c:9}]
};

function randomItem(a){return a[Math.floor(Math.random()*a.length)];}
function uniquePick(cat){
if(usedIngredients.length>15)usedIngredients=[];
let item;
do{item=randomItem(ingredients[cat]);}
while(usedIngredients.includes(item.name));
usedIngredients.push(item.name);
return item;
}

function generateRecipe(){
let goal=document.getElementById("goal").value;

let weights={
cut:{protein:170,carb:60,veg:150,fat:8},
maintain:{protein:150,carb:100,veg:120,fat:10},
bulk:{protein:180,carb:150,veg:120,fat:12}
};

let w=weights[goal];

let p=uniquePick("protein");
let c=uniquePick("carbs");
let v=uniquePick("veggies");
let f=uniquePick("fats");

function calc(item,weight){
return{
p:item.p*weight/100,
f:item.f*weight/100,
c:item.c*weight/100
};
}

let total={p:0,f:0,c:0};
[calc(p,w.protein),calc(c,w.carb),calc(v,w.veg),calc(f,w.fat)]
.forEach(x=>{total.p+=x.p;total.f+=x.f;total.c+=x.c;});

let kcal=total.p*4+total.f*9+total.c*4;

document.getElementById("result").innerHTML=
`<div style="margin-top:10px;">
<p>${p.name}, ${c.name}, ${v.name}, ${f.name}</p>
<div class="stat"><span>Белки</span><span>${total.p.toFixed(1)} г</span></div>
<div class="stat"><span>Жиры</span><span>${total.f.toFixed(1)} г</span></div>
<div class="stat"><span>Углеводы</span><span>${total.c.toFixed(1)} г</span></div>
<div class="kcal">${kcal.toFixed(0)} ккал</div>
</div>`;

updateChart(total.p,total.f,total.c);
saveHistory(`${p.name}, ${c.name}, ${v.name}, ${f.name} — ${kcal.toFixed(0)} ккал`);
}

function updateChart(p,f,c){
if(chart)chart.destroy();
chart=new Chart(document.getElementById("chart"),{
type:"doughnut",
data:{
labels:["Белки","Жиры","Углеводы"],
datasets:[{data:[p,f,c],
backgroundColor:["#10b981","#f59e0b","#3b82f6"]}]
}
});
}

function saveHistory(text){
let h=JSON.parse(localStorage.getItem("recipes")||"[]");
h.unshift(text);
localStorage.setItem("recipes",JSON.stringify(h));
displayHistory();
}

function displayHistory(){
let h=JSON.parse(localStorage.getItem("recipes")||"[]");
document.getElementById("history").innerHTML="<b>История:</b><br>"+h.slice(0,5).join("<br>");
}

displayHistory();
</script>

</body>
</html>